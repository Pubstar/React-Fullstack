{"ast":null,"code":"import _slicedToArray from\"D:/GitHub/React-Fullstack/React-Fullstack/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from'react';import{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Login=function Login(_ref){var setCurrentUser=_ref.setCurrentUser,currentUser=_ref.currentUser;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1];var username,password;var navigate=useNavigate();function handleLogin(e){e.preventDefault();setIsLoading(true);fetch(process.env.REACT_APP_API_LINK+\"/api/login\",{method:\"POST\",headers:{'Content-Type':'application/json'},body:JSON.stringify({username:username,password:password})}).then(function(response){return response.json().then(function(res){setIsLoading(false);if(res===\"incorrect username or password\"){document.getElementById('error-text').style.visibility='visible';}if(res.username){setCurrentUser(res);navigate('/');}else{document.getElementById('error-text').style.visibility='visible';}});}).catch(function(err){setIsLoading(false);console.log(\"No user found\");document.getElementById('error-text').style.visibility='visible';});e.target.username.value=\"\";e.target.password.value=\"\";}function handleUsername(e){username=e.target.value;}function handlePassword(e){password=e.target.value;}return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl mb-8\",children:\"Login\"}),isLoading?/*#__PURE__*/_jsx(\"span\",{children:\"Loading...\"}):/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleLogin,action:\"\",method:\"post\",className:\"flex flex-col gap-2\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"username\",children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{required:true,className:\"p-1 rounded-xl\",onChange:handleUsername,type:\"text\",name:\"username\",id:\"username\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{required:true,className:\"p-1 rounded-xl\",onChange:handlePassword,type:\"password\",name:\"password\",id:\"password\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\" bg-amber-300 py-2 px-5 rounded-xl hover:bg-amber-200\",children:\"Login\"})]}),/*#__PURE__*/_jsx(\"span\",{id:\"error-text\",className:\" text-red-800 mt-4 invisible\",children:\"Wrong login information.\"})]})});};export default Login;","map":{"version":3,"names":["useState","useNavigate","Login","setCurrentUser","currentUser","isLoading","setIsLoading","username","password","navigate","handleLogin","e","preventDefault","fetch","process","env","REACT_APP_API_LINK","method","headers","body","JSON","stringify","then","response","json","res","document","getElementById","style","visibility","catch","err","console","log","target","value","handleUsername","handlePassword"],"sources":["D:/GitHub/React-Fullstack/React-Fullstack/client/src/components/login/Login.jsx"],"sourcesContent":["import { useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst Login = ({ setCurrentUser, currentUser }) => {\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    let username, password;\r\n    const navigate = useNavigate();\r\n\r\n    function handleLogin(e) {\r\n        e.preventDefault();\r\n        setIsLoading(true);\r\n        fetch(process.env.REACT_APP_API_LINK + \"/api/login\", {\r\n            method: \"POST\",\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify({ username, password })\r\n        }).then(response => response.json().then(res => {\r\n            setIsLoading(false);\r\n            if (res === \"incorrect username or password\") {\r\n                document.getElementById('error-text').style.visibility = 'visible';\r\n            }\r\n            if (res.username) {\r\n                setCurrentUser(res);\r\n                navigate('/');\r\n            } else {\r\n                document.getElementById('error-text').style.visibility = 'visible';\r\n            }\r\n        })).catch(err => {\r\n            setIsLoading(false);\r\n            console.log(\"No user found\");\r\n            document.getElementById('error-text').style.visibility = 'visible';\r\n        })\r\n        e.target.username.value = \"\";\r\n        e.target.password.value = \"\";\r\n    }\r\n\r\n    function handleUsername(e) {\r\n        username = e.target.value;\r\n    }\r\n\r\n    function handlePassword(e) {\r\n        password = e.target.value;\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div className='flex flex-col items-center'>\r\n                <h1 className='text-3xl mb-8'>Login</h1>\r\n                {isLoading ? <span>Loading...</span> : <form onSubmit={handleLogin} action=\"\" method=\"post\" className='flex flex-col gap-2'>\r\n                    <label htmlFor=\"username\">Username</label>\r\n                    <input required className='p-1 rounded-xl' onChange={handleUsername} type=\"text\" name=\"username\" id=\"username\" />\r\n                    <label htmlFor=\"password\">Password</label>\r\n                    <input required className='p-1 rounded-xl' onChange={handlePassword} type=\"password\" name=\"password\" id=\"password\" />\r\n                    <button type=\"submit\" className=' bg-amber-300 py-2 px-5 rounded-xl hover:bg-amber-200'>Login</button>\r\n                </form>}\r\n                <span id='error-text' className=' text-red-800 mt-4 invisible'>Wrong login information.</span>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Login"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}